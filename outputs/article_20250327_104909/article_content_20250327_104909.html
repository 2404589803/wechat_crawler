<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>全景解读 LLM Posting-Train（后训练）技术</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1 { font-size: 24px; margin-bottom: 10px; }
        .meta { color: #666; margin-bottom: 20px; }
        img { max-width: 100%; height: auto; }
        .media-info { margin-top: 20px; padding: 10px; background-color: #f5f5f5; border-radius: 5px; }
        .video-links { margin-top: 20px; padding: 10px; background-color: #e9f7fe; border-radius: 5px; }
        .video-links h3 { margin-top: 0; }
        .video-links ul { padding-left: 20px; }
        video { max-width: 100%; }
    </style>
</head>
<body>
    <h1>全景解读 LLM Posting-Train（后训练）技术</h1>
    <div class="meta">
        作者: 吃果冻不吐果冻皮<br>
        发布时间: <br>
        原始链接: <a href="https://mp.weixin.qq.com/s/ezp_YKVlJ-dJzBw9qjPx4Q" target="_blank">https://mp.weixin.qq.com/s/ezp_YKVlJ-dJzBw9qjPx4Q</a>
    </div>
    
    
    
    <div class="content">
        <div class="rich_media_content js_underline_content autoTypeSetting24psection" id="js_content" style="visibility: hidden; opacity: 0; "><section style='margin-bottom: 0px;padding-left: 10px;padding-right: 10px;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;font-family: Optima, "Microsoft YaHei", PingFangSC-regular, serif;font-size: 16px;color: rgb(0, 0, 0);line-height: 1.5em;word-spacing: 0em;letter-spacing: 0em;word-break: break-word;text-align: left;'><pre style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><span style='display: block;background: url("https://mmbiz.qpic.cn/mmbiz_svg/JiavaWZxX4YtuonHKajwDkeca6zE1jk4ib0KT7WtlD0JYQIRutUUf1DIJN2QRbZJ9hibuamWyZuqabkFJxpEetyBlDZkibqjWYke/640?wx_fmt=svg&amp;from=appmsg&amp;") 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;'></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: Consolas, Monaco, Menlo, monospace;font-size: 12px;"><span>知乎：https://zhuanlan.zhihu.com/p/30201040247 </span><span><br/></span></code></pre><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>今天给大家带来一篇知乎@tomsheep 对《LLM Post-Training: A Deep Dive into Reasoning Large Language Models》论文的解读，系统介绍LLM posting train技术。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>paper：https://arxiv.org/abs/2502.21321</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>2023 年，当 ChatGPT 惊艳世界时，很多人第一次意识到：原来 AI 不仅能背课文，还能写代码、编故事、解数学题。这些聪明表现的背后，得益于大语言模型（LLM）的两个关键训练阶段：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>预训练</span></strong><span>（Pretraining）和</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>后训练</span></strong><span>（Post-training）。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>预训练阶段通过海量文本数据（通常达到 TB 级别）的自我监督学习，使模型掌握基本的语言规律和世界知识。但仅有预训练的LLM，就好像刚学会六脉神剑的段誉，一身内功，但不会施展。这时，我们就需要通过「后训练」来给模型能力进行「塑型」—— 通过特定方法让模型在医疗诊断、法律咨询、编程开发等专业领域大显身手，同时学会遵守伦理规范、避免信口开河。正是这些「精装修」步骤，把原始的语言模型变成了我们日常使用的智能助手。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>后训练技术的核心价值体现在三个维度：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>知识精炼</span></strong><span>：修正预训练阶段的知识偏差与事实错误</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>能力对齐</span></strong><span>：使模型输出符合人类价值观和任务需求</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>推理增强</span></strong><span>：赋予模型多步推理、逻辑验证等高级认知能力</span></section></li></ul><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>在后面的讲述中，我们沿用上述原论文给出的分类视角（taxonomy），从「微调」、「强化学习」、「测试时拓展」三个类别去认识各种后训练技术。</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_1.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h2 style="margin-top: 30px;margin-bottom: 15px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none;border-width: 1px;border-color: rgb(0, 0, 0);border-radius: 0px;box-shadow: none;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-shadow: none;transform: none;width: auto;-webkit-box-reflect: unset;"><span style="display: none;"></span><span style="font-size: 18px;color: rgb(34, 34, 34);line-height: 1.8em;letter-spacing: 0em;padding-left: 10px;border-style: none none none solid;border-width: 1px 1px 1px 5px;border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0) rgb(145, 109, 213);border-radius: 0px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;box-shadow: none;display: block;font-weight: bold;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-indent: 0em;transform: none;width: auto;-webkit-box-reflect: unset;"><span>一、微调技术：模型的定向进化</span></span><span style="display: none;"></span></h2><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>1.1 全参数微调</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>全参数微调（Full Fine-tuning）是指在预训练模型的基础上，使用下游任务的数据集，更新模型中的</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>所有参数</span></strong><span>，以使模型适应特定任务。这种方法在早期的深度学习中非常常见，但随着模型规模的增大，其弊端也逐渐显现。</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_2.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>1.2 参数高效微调 (PEFT)</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>参数高效微调（Parameter-Efficient Fine-Tuning，PEFT）是一系列旨在以较少的计算资源和数据量，实现与全参数微调相近性能的技术。这类方法通常</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>冻结</span></strong><span>预训练模型的大部分参数，只训练</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>少量额外的参数</span></strong><span>。</span></p><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>1.2.1 LoRA 系列技术</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>低秩适配（LoRA）</span></strong><span> 的核心思想是冻结原始参数，通过低秩分解引入可训练参数。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数学原理</span></strong><span>：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>LoRA 假设预训练模型的参数矩阵的更新可以表示为一个低秩矩阵。具体来说，对于一个预训练好的权重矩阵 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.375ex;width: 10.471ex;height: 2.413ex;"><g><g><g><g><path></path></g><g><g><path></path></g></g></g><g><path></path></g><g><g><g><path></path></g></g><g><g><path></path></g><g><path></path></g><g><path></path></g></g></g></g></g><g></g></svg></span></span><span> ，LoRA 引入两个低秩矩阵 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.09ex;width: 9.007ex;height: 2.128ex;"><g><g><g><path></path></g><g><path></path></g><g><g><g><path></path></g></g><g><g><path></path></g><g><path></path></g><g><path></path></g></g></g></g></g><g></g></svg></span></span><span> 和 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.09ex;width: 9.029ex;height: 2.128ex;"><g><g><g><path></path></g><g><path></path></g><g><g><g><path></path></g></g><g><g><path></path></g><g><path></path></g><g><path></path></g></g></g></g></g><g></g></svg></span></span><span> ，其中</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.566ex;width: 13.433ex;height: 2.262ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span><span> 是秩。在微调过程中，只优化 </span><span style="cursor:pointer;"><span><svg style="vertical-align: 0px;width: 1.697ex;height: 1.62ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span> 和 </span><span style="cursor:pointer;"><span><svg style="vertical-align: 0px;width: 1.717ex;height: 1.545ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>，而 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.375ex;width: 3.049ex;height: 1.92ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span> 保持不变。更新后的权重矩阵为：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span style="cursor:pointer;"><span><svg style="vertical-align: -0.375ex;width: 14.617ex;height: 1.994ex;"><g><g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>由于 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.02ex;height: 1.025ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>远小于 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.023ex;width: 1.176ex;height: 1.593ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>和 </span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.179ex;height: 1.595ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>，因此 LoRA 只需要训练很少的参数，就可以达到与全参数微调相近的性能。</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_3.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>伪代码示例</span></strong><span>：</span></p><pre style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><span style='display: block;background: url("https://mmbiz.qpic.cn/mmbiz_svg/JiavaWZxX4YtuonHKajwDkeca6zE1jk4ib0KT7WtlD0JYQIRutUUf1DIJN2QRbZJ9hibuamWyZuqabkFJxpEetyBlDZkibqjWYke/640?wx_fmt=svg&amp;from=appmsg&amp;") 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;'></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: Consolas, Monaco, Menlo, monospace;font-size: 12px;"><span>import torch</span><span><br/></span><span>import torch.nn as nn</span><span><br/></span><span><br/></span><span>class LoRALayer(nn.Module):</span><span><br/></span><span> def __init__(self, in_dim, out_dim, rank):</span><span><br/></span><span>  super().__init__()</span><span><br/></span><span>  self.A = nn.Parameter(torch.randn(in_dim, rank))</span><span><br/></span><span>  self.B = nn.Parameter(torch.zeros(rank, out_dim))</span><span><br/></span><span>  self.rank = rank </span><span style="color: #5c6370;font-style: italic;line-height: 26px;"><span>#  秩的大小</span></span><span><br/></span><span> def forward(self, x):</span><span><br/></span><span>  </span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> x @ (self.A @ self.B)  </span><span style="color: #5c6370;font-style: italic;line-height: 26px;"><span># 低秩矩阵乘积</span></span><span><br/></span></code></pre><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>关键技术演进</span></strong><span>：</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_4.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>AdaLoRA</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：AdaLoRA（Adaptive LoRA）旨在</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>动态调整各层的秩分配</span></strong><span>。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>实现方式</span></strong><span>：AdaLoRA 通过一些指标（例如，梯度范数）来评估不同层的重要性，并根据重要性动态地调整 LoRA 的秩。更重要的层分配更高的秩，从而获得更好的性能。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>QLoRA</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：QLoRA（Quantized LoRA）将</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>4-bit 量化</span></strong><span>与 LoRA 相结合，以进一步降低显存占用。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>实现方式</span></strong><span>：QLoRA 首先将预训练模型的权重</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>量化</span></strong><span>为 4-bit 精度，然后在此基础上应用 LoRA。由于 4-bit 量化可以显著降低显存占用，因此 QLoRA 可以在有限的 GPU 资源上微调更大的模型。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>显存节省</span></strong><span>：QLoRA 可以节省高达 70% 的显存。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>Delta-LoRA</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：Delta-LoRA 引入</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>参数更新量的动量机制</span></strong><span>。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>实现方式</span></strong><span>：Delta-LoRA 在更新 LoRA 参数时，考虑之前的更新方向和幅度，从而更稳定地进行微调。</span></section></li></ul></ul><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>1.2.2 提示微调技术</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>提示微调（Prompt Tuning）</span></strong><span> 是一种通过</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>设计合适的提示（Prompt）</span></strong><span> 来引导预训练模型完成下游任务的技术。与全参数微调和 LoRA 不同，提示微调通常</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>不直接修改预训练模型的参数</span></strong><span>（注意不是完全不修改参数），而是通过优化提示相关的向量来调整模型的行为。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>人工设计到可学习</span></strong><span>：提示工程（Prompt Engineering）经历了从人工设计提示到可学习提示的演进过程。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>利用预训练知识</span></strong><span>：通过优化提示，引导模型利用预训练知识，从而减少对标注数据的依赖。</span></section></li></ul><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数学原理</span></strong><span>：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>公式</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span style="cursor:pointer;"><span><svg style="vertical-align: -0.65ex;width: 33.682ex;height: 2.688ex;"><g><g><g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g></g></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g><g><path></path></g></g><g><g><path></path></g></g></g></g></g><g></g></svg></span></span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>描述了</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>可学习的提示向量</span></strong><span>。其中，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.65ex;width: 6.505ex;height: 2.22ex;"><g><g><g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g></g></g><g></g></svg></span></span><span>表示提示向量，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.357ex;width: 2.118ex;height: 1.902ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>表示第</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 0.781ex;height: 1.52ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>个可训练的提示向量，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.179ex;height: 1.595ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>表示提示的长度，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.023ex;width: 1.176ex;height: 1.593ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>表示提示向量的维度。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>位置选择策略</span></strong><span>：</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_5.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>Prefix-Tuning</span></strong><span>（粉色）：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：只在</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>每层</span></strong><span>的</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>开头</span></strong><span>插入可训练的提示向量。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数学形式</span></strong><span>：</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.566ex;width: 29.643ex;height: 2.653ex;"><g><g><g><g><path></path></g><g><g><path></path></g></g></g><g><path></path></g><g><path></path><path></path><path></path><path></path><path></path><path></path><path></path><path></path><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path><path></path><path></path><path></path><path></path><path></path></g><g><path></path></g></g><g><path></path></g><g><g><path></path></g><g><g><path></path></g></g></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>参数量</span></strong><span>：每层新增参数</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 4.963ex;height: 1.595ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span><span>（</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.023ex;width: 1.176ex;height: 1.593ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>为维度，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.02ex;height: 1.025ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>为前缀长度）</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>优点</span></strong><span>：Prefix-Tuning 可以有效地影响模型的每一层，从而更好地调整模型的行为。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>缺点</span></strong><span>：Prefix-Tuning 需要插入大量的提示向量，可能会增加计算成本。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>P-Tuning v2</span></strong><span>（绿色）：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>分层插入</span></strong><span>位置</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>可学习</span></strong><span>。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>实现方式</span></strong><span>：P-Tuning v2 首先将提示向量插入到不同的层中，然后通过训练来确定每个提示向量的最佳位置。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数学形式</span></strong><span>：</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.869ex;width: 27.903ex;height: 2.907ex;"><g><g><g><g><path></path><path></path><path></path><path></path><path></path><path></path><path></path><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path><path></path><path></path><path></path><path></path><path></path><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g></g></g><g></g></svg></span></span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>优点</span></strong><span>：P-Tuning v2 可以更灵活地调整提示向量的位置，从而更好地适应不同的任务。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>Prompt-Tuning</span></strong><span>（蓝色）：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>核心思想</span></strong><span>：仅在</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>输入层</span></strong><span>添加可训练提示词。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>参数量</span></strong><span>：仅需</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 5.121ex;height: 1.595ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span><span>（</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.179ex;height: 1.595ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>为提示词数量）</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数学形式</span></strong><span>：</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.566ex;width: 20.709ex;height: 2.262ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path><path></path><path></path><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>优点</span></strong><span>：Prompt-Tuning 的实现简单，计算成本低。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>缺点</span></strong><span>：Prompt-Tuning 的效果可能不如 Prefix-Tuning 和 P-Tuning v2。</span></section></li></ul></ul><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>关键差异对比表：</span></strong></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_6.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>技术演进趋势：</span></strong></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_7.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>动态混合提示</span></strong><span>作为最新发展方向，允许模型自主决定：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>是否需要在某层插入提示</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>最佳提示插入位置</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>不同提示向量的权重分配</span></section></li></ul><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>1.3领域自适应微调</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>领域自适应微调（Domain Adaptive Fine-Tuning）</span></strong><span> 是指在特定领域的数据上对预训练模型进行微调，以使其更好地适应该领域的任务。这种方法在医疗、法律等专业领域尤其重要，因为这些领域的数据具有独特的特点和术语。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>案例：医疗问答系统的微调策略</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>以一个医疗问答系统的微调策略为例：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数据构造</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>通用指令数据</span></strong><span>：例如，"请解释什么是高血压？"、"如何预防感冒？" 等。这些数据可以帮助模型保持通用的语言理解能力。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>专业文献问答</span></strong><span>：从医学文献中提取问题和答案，例如，"《柳叶刀》杂志最近发表了关于 COVID-19 疫苗有效性的研究，请总结其主要发现。"。这些数据可以帮助模型学习专业的医学知识。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>比例</span></strong><span>：混合比例的选择需要根据实际情况进行调整。一般来说，如果领域数据比较稀缺，可以适当增加通用指令数据的比例。</span></section></li></ul><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>混合通用指令数据 (20%) + 专业文献问答 (80%)：</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>分层微调</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>计算效率</span></strong><span>：只微调部分层可以显著降低计算成本。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>避免灾难性遗忘</span></strong><span>：冻结大部分层可以保留预训练模型的通用知识，从而避免灾  难性遗忘。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>微调后 10% 的原因</span></strong><span>：这是一个经验性的选择，通常认为后几层更接近特定任务，因此微调这些层可以更好地适应领域数据。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>需要实验验证</span></strong><span>：最佳的微调层数需要根据实际情况进行实验验证。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>评估指标</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>FActScore</span></strong><span>：一种用于评估模型生成答案的事实一致性的指标。FActScore 越高，表示模型生成的答案与事实越一致。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>重要性</span></strong><span>：在医疗领域，事实一致性至关重要。如果模型生成错误的医疗信息，可能会对患者的健康造成严重影响。</span></section></li></ul><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>FActScore（事实一致性评分）&gt; 0.85</span></strong><span>：</span></section></li></ul></ul><h2 style="margin-top: 30px;margin-bottom: 15px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none;border-width: 1px;border-color: rgb(0, 0, 0);border-radius: 0px;box-shadow: none;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-shadow: none;transform: none;width: auto;-webkit-box-reflect: unset;"><span style="display: none;"></span><span style="font-size: 18px;color: rgb(34, 34, 34);line-height: 1.8em;letter-spacing: 0em;padding-left: 10px;border-style: none none none solid;border-width: 1px 1px 1px 5px;border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0) rgb(145, 109, 213);border-radius: 0px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;box-shadow: none;display: block;font-weight: bold;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-indent: 0em;transform: none;width: auto;-webkit-box-reflect: unset;"><span>二、强化学习：从对齐到推理</span></span><span style="display: none;"></span></h2><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>2.1 LLM推理技术全景图</span></span><span style="display: none;"></span></h4><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_8.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>2.2奖励建模</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>奖励建模（Reward Modeling）</span></strong><span> 是很多 RL 方法的关键步骤之一。它的目标是根据人类的偏好数据，训练一个能够预测人类对模型输出的偏好程度的模型。</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>偏好数据</span></strong><span>：训练奖励模型需要大量的偏好数据。这些数据通常由人工标注，例如，让人类对不同的模型输出进行排序或打分。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>奖励模型的选择</span></strong><span>：奖励模型可以是任何一种机器学习模型，例如，线性模型、神经网络等。常见的选择是使用与预训练语言模型结构相似的模型。</span></section></li></ul><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>Bradley-Terry 模型</span></strong><span>是一种常用的奖励建模方法：假设对于给定的输入</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.294ex;height: 1.025ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>，人类更喜欢输出</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.464ex;width: 1.774ex;height: 1.464ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>而不是</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.666ex;width: 1.881ex;height: 1.666ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>的概率可以表示为：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span style="cursor:pointer;"><span><svg style="vertical-align: -1.309ex;width: 34.911ex;height: 3.678ex;"><g><g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><g><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g></g><g><g><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g></g><rect height="60" width="8529.2"></rect></g></g></g><g></g></svg></span></span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>其中，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.566ex;width: 6.886ex;height: 2.262ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span><span>是奖励模型给出的奖励值，表示模型认为输出</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.464ex;width: 1.109ex;height: 1.464ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>对于输入</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.294ex;height: 1.025ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>的好坏程度。</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.093ex;width: 1.76ex;height: 1.312ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>表示偏好关系，即</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.666ex;width: 6.672ex;height: 1.885ex;"><g><g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>表示人类更喜欢</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.464ex;width: 1.774ex;height: 1.464ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>而不是</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.666ex;width: 1.881ex;height: 1.666ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>训练目标</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>训练奖励模型的</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>目标</span></strong><span>是</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>最小化负对数似然</span></strong><span>：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span style="cursor:pointer;"><span><svg style="vertical-align: -0.666ex;width: 27.258ex;height: 2.363ex;"><g><g><g><g><g><path></path></g></g><g><g><path></path></g><g><path></path></g></g></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path><path></path><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>这个公式表示，我们希望奖励模型给出的奖励值能够尽可能地符合人类的偏好。也就是说，如果人类更喜欢</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.464ex;width: 1.774ex;height: 1.464ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>而不是</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.666ex;width: 1.881ex;height: 1.666ex;"><g><g><g><g><path></path></g><g><path></path></g></g></g></g><g></g></svg></span></span><span>，那么我们希望</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.566ex;width: 7.551ex;height: 2.262ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g></g></g><g></g></svg></span></span><span>尽可能地大于</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.666ex;width: 7.658ex;height: 2.363ex;"><g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g></g></g><g></g></svg></span></span><span>。</span></p><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>2.3 主流优化算法对比</span></span><span style="display: none;"></span></h4><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_9.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;pointer-events: initial;height: auto !important;"/></span></figure><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_10.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>2.4 过程奖励 Vs 结果奖励</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>在强化学习中，</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>奖励函数</span></strong><span>的设计至关重要。奖励函数定义了模型在不同状态下应该获得的奖励，从而引导模型学习到期望的行为。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>根据奖励的来源，可以将奖励分为</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>过程奖励</span></strong><span>和</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>结果奖励</span></strong><span>。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>过程奖励（Process Reward）</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>过程奖励是指在</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>每个步骤</span></strong><span>中，根据模型的</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>行为</span></strong><span>给出的奖励。过程奖励可以提供更</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>密集</span></strong><span>的反馈信号，帮助模型更快地学习。但缺点是设计比较</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>困难</span></strong><span>，需要对任务有深入的理解。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>举个例子：</span></p><pre style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><span style='display: block;background: url("https://mmbiz.qpic.cn/mmbiz_svg/JiavaWZxX4YtuonHKajwDkeca6zE1jk4ib0KT7WtlD0JYQIRutUUf1DIJN2QRbZJ9hibuamWyZuqabkFJxpEetyBlDZkibqjWYke/640?wx_fmt=svg&amp;from=appmsg&amp;") 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;'></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: Consolas, Monaco, Menlo, monospace;font-size: 12px;"><span>def calculate_step_reward(response):</span><span><br/></span><span style="color: #5c6370;font-style: italic;line-height: 26px;"><span># 1. 语法正确性检查</span></span><span><br/></span><span> syntax = check_syntax(response)</span><span><br/></span><span style="color: #5c6370;font-style: italic;line-height: 26px;"><span># 2. 逻辑连贯性评估</span></span><span><br/></span><span> coherence = model.predict_coherence(response)</span><span><br/></span><span style="color: #5c6370;font-style: italic;line-height: 26px;"><span># 3. 事实一致性验证</span></span><span><br/></span><span> fact_check = retrieve_evidence(response)</span><span><br/></span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> 0.3*syntax + 0.5*coherence + 0.2*fact_check</span><span><br/></span></code></pre><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>在这个例子中，奖励函数考虑了三个方面：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>语法正确性检查</span></strong><span>：检查模型生成的文本是否符合语法规则。例如，可以使用语法分析器来判断文本是否存在语法错误。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>逻辑连贯性评估</span></strong><span>：评估模型生成的文本是否逻辑连贯。例如，可以使用语言模型来预测文本的连贯性。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>事实一致性验证</span></strong><span>：验证模型生成的文本是否与事实相符。例如，可以使用知识库来检索相关信息，然后判断模型生成的文本是否与知识库中的信息一致。</span></section></li></ul><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>对这三个方面进行加权求和，得到最终的奖励值。</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>权重</span></strong><span>的选择需要根据实际情况进行调整。一般来说，更重要的方面应该分配更高的权重。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>结果奖励（Outcome Reward）</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>结果奖励是指在</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>任务完成后</span></strong><span>，根据模型的</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>最终结果</span></strong><span>给出的奖励。结果奖励的设计比较</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>简单</span></strong><span>，只需要关注最终结果即可。但可能提供较</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>稀疏</span></strong><span>的反馈信号，导致模型学习困难。典型应用场景包括：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>数学问题</span></strong><span>：最终答案正确性。例如，如果模型生成的答案与正确答案一致，则给出正奖励；否则，给出负奖励。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>代码生成</span></strong><span>：通过单元测试的比例。例如，如果模型生成的代码能够通过所有的单元测试，则给出正奖励；否则，给出负奖励。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>对话系统</span></strong><span>：用户满意度评分。例如，如果用户对模型的回复感到满意，则给出正奖励；否则，给出负奖励。</span></section></li></ul><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>2.5 强化学习的推理增强实践</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>举一个 </span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>思维树（ToT）算法框架</span></strong><span> 的例子：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>思维生成：基于当前状态生成候选思考</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>状态评估：使用价值函数评估每个候选</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>广度优先搜索：保留 top-k 候选继续扩展</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><span>回溯更新：反向传播累积奖励</span></section></li></ul><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_11.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h2 style="margin-top: 30px;margin-bottom: 15px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none;border-width: 1px;border-color: rgb(0, 0, 0);border-radius: 0px;box-shadow: none;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-shadow: none;transform: none;width: auto;-webkit-box-reflect: unset;"><span style="display: none;"></span><span style="font-size: 18px;color: rgb(34, 34, 34);line-height: 1.8em;letter-spacing: 0em;padding-left: 10px;border-style: none none none solid;border-width: 1px 1px 1px 5px;border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0) rgb(145, 109, 213);border-radius: 0px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;box-shadow: none;display: block;font-weight: bold;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-indent: 0em;transform: none;width: auto;-webkit-box-reflect: unset;"><span>三、测试时扩展：推理即搜索</span></span><span style="display: none;"></span></h2><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>3.1 主流推理增强技术</span></span><span style="display: none;"></span></h4><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_12.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>3.2 计算最优扩展策略</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>不同的推理增强技术适用于不同的场景。如何根据具体的问题选择最优的推理增强技术呢？这就是 </span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>计算最优扩展策略</span></strong><span> 要解决的问题。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>动态计算分配算法</span></strong><span> 的核心思想是</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>根据问题的难度动态地分配计算资源</span></strong><span>。对于简单的问题，可以使用简单的推理方法；对于复杂的问题，可以使用更复杂的推理方法。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>伪代码示例</span></strong><span>：</span></p><pre style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><span style='display: block;background: url("https://mmbiz.qpic.cn/mmbiz_svg/JiavaWZxX4YtuonHKajwDkeca6zE1jk4ib0KT7WtlD0JYQIRutUUf1DIJN2QRbZJ9hibuamWyZuqabkFJxpEetyBlDZkibqjWYke/640?wx_fmt=svg&amp;from=appmsg&amp;") 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;'></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: Consolas, Monaco, Menlo, monospace;font-size: 12px;"><span>def dynamic_compute_allocation(query):</span><span><br/></span><span> difficulty = estimate_difficulty(query)</span><span><br/></span><span style="color: #c678dd;line-height: 26px;"><span>if</span></span><span> difficulty &lt; 0.3:</span><span><br/></span><span>  </span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> greedy_decode()</span><span><br/></span><span style="color: #c678dd;line-height: 26px;"><span>elif</span></span><span> 0.3 &lt;= difficulty &lt; 0.7:</span><span><br/></span><span>  </span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> beam_search(width=3)</span><span><br/></span><span style="color: #c678dd;line-height: 26px;"><span>else</span></span><span>:</span><span><br/></span><span>  </span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> monte_carlo_tree_search(depth=5)</span><span><br/></span></code></pre><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>在这个例子中，</span><code style='color: rgb(145, 109, 213);letter-spacing: 0em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: "Operator Mono", Consolas, Monaco, Menlo, monospace;word-break: break-all;'><span>estimate_difficulty</span></code><span> 函数用于评估问题的难度。根据问题的难度，选择不同的推理方法。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>如何评估问题的难度呢？一个思路是</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>根据问题的特征来预测</span></strong><span>。比如：</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>问题长度与复杂度</span></strong><span>：问题越长，复杂度越高，难度越大。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>领域专业性指标</span></strong><span>：问题涉及的领域越专业，难度越大。例如，医学问题的难度通常高于一般问题。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>历史正确率统计</span></strong><span>：如果模型在过去的历史数据中对类似问题的正确率较低，则说明该问题的难度较大。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>语义模糊性评分</span></strong><span>：如果问题存在语义模糊性，则难度较大。例如，"苹果公司最近发布了什么？" 这个问题存在语义模糊性，因为 "发布" 可以指发布新产品、发布财报等。</span></section></li></ul><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>3.3验证器增强推理</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>验证器增强推理</span></strong><span> 是一种通过使用验证器（Verifier）来检查模型生成的答案的正确性，从而提高推理准确率的技术。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>可以构建一个多层验证体系，对模型生成的答案进行多方面的验证。</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>语法验证器</span></strong><span>：检查代码/公式语法。例如，可以使用语法分析器来判断代码或公式是否存在语法错误。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>逻辑验证器</span></strong><span>：命题逻辑一致性检查。例如，可以使用逻辑推理引擎来判断命题是否符合逻辑。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>事实验证器</span></strong><span>：知识库检索验证。例如，可以使用知识库来检索相关信息，然后判断模型生成的答案是否与知识库中的信息一致。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>安全验证器</span></strong><span>：有害内容过滤。例如，可以使用有害内容检测模型来判断模型生成的文本是否包含有害内容。</span></section></li></ul><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>下面这个公式描述了如何将多个验证器的结果组合起来：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span style="cursor:pointer;"><span><svg style="vertical-align: -0.777ex;width: 29.27ex;height: 2.563ex;"><g><g><g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g><g><g></g></g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>其中，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.357ex;width: 4.686ex;height: 1.902ex;"><g><g><g><g><path></path></g><g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g></g></g><g></g></svg></span></span><span>表示总的验证分数，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.566ex;width: 4.805ex;height: 2.262ex;"><g><g><g><g><path></path></g><g><path></path></g></g><g><path></path></g><g><path></path></g><g><path></path></g></g></g><g></g></svg></span></span><span>表示第</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 0.781ex;height: 1.52ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>个验证器对答案</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.023ex;width: 1.061ex;height: 1.023ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>的评分，</span><span style="cursor:pointer;"><span><svg style="vertical-align: -0.025ex;width: 1.357ex;height: 1.025ex;"><g><g><g><path></path></g></g></g><g></g></svg></span></span><span>表示验证器的数量。这个公式表示，总的验证分数是所有验证器评分的乘积。每个验证器的评分都在 0 到 1 之间，评分越高，表示答案越可靠。</span></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>乘积的原因</span></strong><span>：使用乘积的原因是，如果有一个验证器的评分很低，则总的验证分数也会很低，这表示答案的可靠性较低。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>其他组合方式</span></strong><span>：除了乘积之外，还可以使用其他的组合方式，例如，加权平均。</span></section></li></ul><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_13.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h2 style="margin-top: 30px;margin-bottom: 15px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none;border-width: 1px;border-color: rgb(0, 0, 0);border-radius: 0px;box-shadow: none;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-shadow: none;transform: none;width: auto;-webkit-box-reflect: unset;"><span style="display: none;"></span><span style="font-size: 18px;color: rgb(34, 34, 34);line-height: 1.8em;letter-spacing: 0em;padding-left: 10px;border-style: none none none solid;border-width: 1px 1px 1px 5px;border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0) rgb(145, 109, 213);border-radius: 0px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;box-shadow: none;display: block;font-weight: bold;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-indent: 0em;transform: none;width: auto;-webkit-box-reflect: unset;"><span>四、挑战与未来方向</span></span><span style="display: none;"></span></h2><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>4.1 现有技术瓶颈</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>奖励误导（Reward Hacking）</span></strong></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>具体挑战</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>过度优化表面指标</span></strong><span>。奖励误导是指模型为了获得更高的奖励，采取了一些不符合人类意图的行为。例如，模型可能会生成一些表面上看起来很好，但实际上毫无意义或有害的输出。</span></p></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>示例</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>社交媒体推荐系统</span></strong><span>：为了提高用户点击率，模型可能会推荐一些标题耸人听闻、内容低俗的文章，而不是真正有价值的文章。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>对话系统</span></strong><span>：为了获得更高的用户满意度评分，模型可能会生成一些讨好用户、但实际上不解决问题的回复。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>当前最佳方案</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>多目标对抗训练</span></strong><span>。多目标对抗训练是一种通过同时优化多个目标，并引入对抗性损失来防止模型过度优化表面指标的技术。</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>多目标</span></strong><span>：例如，可以同时优化用户点击率和内容质量。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>对抗性损失</span></strong><span>：引入一个对抗模型，用于识别模型生成的欺骗性输出，并惩罚生成这些输出的模型。</span></section></li></ul></ul><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_14.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>长程推理（Long-Range Reasoning）</span></strong></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>具体挑战</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>超过 128k tokens 的连贯性</span></strong><span>。长程推理是指模型在处理长文本时，保持上下文连贯性的能力。由于 Transformer 模型的计算复杂度与序列长度成正比，因此处理长文本的计算成本非常高。此外，模型在长文本中容易出现信息丢失和梯度消失等问题，导致连贯性下降。</span></p></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>示例</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>小说生成</span></strong><span>：模型难以生成超过 128k tokens 的连贯小说，因为在长文本中，角色的行为和情节的发展容易出现矛盾。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>代码理解</span></strong><span>：模型难以理解超过 128k tokens 的复杂代码库，因为代码中的依赖关系和调用关系非常复杂。</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>当前最佳方案</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>层次化记忆机制</span></strong><span>。层次化记忆机制是一种通过将长文本分解为多个段落或章节，并使用层次化的记忆结构来存储和检索信息的技术。</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>段落或章节</span></strong><span>：例如，可以将一篇小说分解为多个章节，每个章节包含若干段落。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>层次化的记忆结构</span></strong><span>：例如，可以使用一个全局记忆模块来存储整篇小说的概要信息，并使用多个局部记忆模块来存储每个章节的详细信息。</span></section></li></ul></ul><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_15.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>个性化安全（Personalized Safety）</span></strong></p><ul style="list-style-type: circle;margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>具体挑战</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>用户特定偏好与通用安全的平衡</span></strong><span>。不同的用户对安全的定义和容忍度不同。例如，一些用户可能对幽默的容忍度较高，而另一些用户可能认为某些幽默是冒犯性的。如何在满足用户个性化偏好的同时，保证模型的输出是安全的，是一个具有挑战性的问题。</span></p></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>示例</span></strong><span>：</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>对话系统</span></strong><span>：如何根据用户的个人喜好，生成既有趣又不会冒犯用户的回复？</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>内容生成</span></strong><span>：如何根据用户的兴趣，生成既有创意又不会传播虚假信息的文章？</span></section></li></ul><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><p style="color: rgb(0, 0, 0);letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>当前最佳方案</span></strong><span>：</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>差分隐私强化学习</span></strong><span>。差分隐私强化学习是一种通过在训练过程中添加噪声来保护用户隐私，并在推理时根据用户的偏好进行调整的技术。</span></p></section></li><ul style="margin-top: 8px;margin-bottom: 8px;padding-left: 25px;"><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>添加噪声</span></strong><span>：在训练过程中，向用户的偏好数据中添加噪声，使得模型无法精确地学习用户的偏好，从而保护用户的隐私。</span></section></li><li><section style="margin-top: 5px;margin-bottom: 5px;color: rgb(1, 1, 1);font-size: 14px;line-height: 1.8em;letter-spacing: 0em;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>根据用户的偏好进行调整</span></strong><span>：在推理时，根据用户的偏好，对模型的输出进行调整，使其更符合用户的需求。</span></section></li></ul></ul><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_16.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>4.2 前沿研究方向</span></span><span style="display: none;"></span></h4><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>为了解决上述技术瓶颈，研究人员正在探索一些新的研究方向。比如 </span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>元认知机制</span></strong><span>、</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>物理推理融合</span></strong><span> 、 </span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>群体智能系统</span></strong><span>等。下面我将对这些方向进行更详细的讲解：</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>元认知机制（Meta-Cognition）</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>核心思想是</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>让模型学会何时需要深入思考</span></strong><span>。元认知是指对认知的认知，即对自己的思考过程的思考。通过赋予模型元认知能力，可以使其能够判断自身是否能够解决当前的问题，并根据需要分配更多的计算资源。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>伪代码示例</span></strong><span>：</span></p><pre style="border-radius: 5px;box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;margin-top: 10px;margin-bottom: 10px;"><span style='display: block;background: url("https://mmbiz.qpic.cn/mmbiz_svg/JiavaWZxX4YtuonHKajwDkeca6zE1jk4ib0KT7WtlD0JYQIRutUUf1DIJN2QRbZJ9hibuamWyZuqabkFJxpEetyBlDZkibqjWYke/640?wx_fmt=svg&amp;from=appmsg&amp;") 10px 10px / 40px no-repeat rgb(40, 44, 52);height: 30px;width: 100%;margin-bottom: -7px;border-radius: 5px;'></span><code style="overflow-x: auto;padding: 16px;color: #abb2bf;padding-top: 15px;background: #282c34;border-radius: 5px;display: -webkit-box;font-family: Consolas, Monaco, Menlo, monospace;font-size: 12px;"><span>def meta_cognition(query):</span><span><br/></span><span> uncertainty = calculate_uncertainty(query)</span><span><br/></span><span style="color: #c678dd;line-height: 26px;"><span>if</span></span><span> uncertainty &gt; threshold:</span><span><br/></span><span>  </span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> allocate_more_compute(query)</span><span><br/></span><span style="color: #c678dd;line-height: 26px;"><span>else</span></span><span>:</span><span><br/></span><span>  </span><span style="color: #e6c07b;line-height: 26px;"><span>return</span></span><span> fast_response(query)</span><span><br/></span></code></pre><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>在这个例子中，</span><code style='color: rgb(145, 109, 213);letter-spacing: 0em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: "Operator Mono", Consolas, Monaco, Menlo, monospace;word-break: break-all;'><span>calculate_uncertainty</span></code><span> 函数用于评估模型对当前问题的</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>不确定性</span></strong><span>。如果模型对当前问题的不确定性超过某个阈值，则说明该问题比较复杂，需要分配更多的计算资源（</span><code style='color: rgb(145, 109, 213);letter-spacing: 0em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: "Operator Mono", Consolas, Monaco, Menlo, monospace;word-break: break-all;'><span>allocate_more_compute</span></code><span>）；否则，说明该问题比较简单，可以使用快速响应（</span><code style='color: rgb(145, 109, 213);letter-spacing: 0em;background: none 0% 0% / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05);width: auto;height: auto;margin-left: 2px;margin-right: 2px;padding: 2px 4px;border-style: none;border-width: 3px;border-color: rgb(0, 0, 0) rgba(0, 0, 0, 0.4) rgba(0, 0, 0, 0.4);border-radius: 4px;font-family: "Operator Mono", Consolas, Monaco, Menlo, monospace;word-break: break-all;'><span>fast_response</span></code><span>）。</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_17.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>物理推理融合（Physical Reasoning）</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>核心思想是</span><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>将符号推理与神经网络结合</span></strong><span>。物理推理是指模型根据物理定律进行推理的能力。通过将符号推理与神经网络结合，可以使模型既能够利用神经网络的强大表示能力，又能够利用符号推理的精确性和可解释性。</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_18.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>通过将这些物理规则嵌入到模型中，可以使模型能够进行物理推理，例如，预测物体在自由落体运动中的位置和速度。</span></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><strong style="color: rgb(145, 109, 213);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;"><span>群体智能系统（Swarm Intelligence）</span></strong></p><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>群体智能是指由多个个体组成的系统，通过个体之间的协作来实现复杂问题的解决。通过构建多模型协作推理框架，可以使不同的模型发挥各自的优势，共同完成复杂的推理任务。</span></p><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_19.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><p style="font-size: 14px;line-height: 1.8em;letter-spacing: 0.02em;text-indent: 0em;padding-top: 8px;padding-bottom: 8px;"><span>在这个流程图中，「任务分解」Agent 负责将问题分解为多个子问题，并将这些子问题分配给各个子任务Agent。「结果整合」Agent 负责将这些结果整合起来，得到最终的答案。</span></p><h2 style="margin-top: 30px;margin-bottom: 15px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none;border-width: 1px;border-color: rgb(0, 0, 0);border-radius: 0px;box-shadow: none;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-shadow: none;transform: none;width: auto;-webkit-box-reflect: unset;"><span style="display: none;"></span><span style="font-size: 18px;color: rgb(34, 34, 34);line-height: 1.8em;letter-spacing: 0em;padding-left: 10px;border-style: none none none solid;border-width: 1px 1px 1px 5px;border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(0, 0, 0) rgb(145, 109, 213);border-radius: 0px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;box-shadow: none;display: block;font-weight: bold;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-indent: 0em;transform: none;width: auto;-webkit-box-reflect: unset;"><span>五、实践指南：如何选择后训练方案</span></span><span style="display: none;"></span></h2><h4 style="margin-top: 30px;margin-bottom: 15px;"><span style="display: none;"></span><span style="font-size: 18px;line-height: 1.5em;letter-spacing: 0em;font-weight: bold;display: block;"><span>5.1 决策流程图</span></span><span style="display: none;"></span></h4><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_20.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure><h3 style="margin-top: 30px;margin-bottom: 15px;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none;border-width: 1px;border-color: rgb(0, 0, 0);border-radius: 0px;box-shadow: none;display: flex;flex-direction: unset;float: unset;height: auto;justify-content: center;overflow: unset;text-shadow: none;transform: none;width: auto;-webkit-box-reflect: unset;"><span style="display: none;"></span><span style="font-size: 17px;border-color: rgb(0, 0, 0) rgb(0, 0, 0) rgb(216, 156, 246);letter-spacing: 0em;align-items: unset;background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;border-style: none none solid;border-width: 1px 1px 2px;border-radius: 0px;box-shadow: none;font-weight: bold;flex-direction: unset;float: unset;height: auto;justify-content: unset;overflow: unset;text-indent: 0em;transform: none;width: auto;-webkit-box-reflect: unset;"><span>5.2 工具链推荐</span></span><span style="display: none;"></span></h3><figure style="margin-top: 10px;margin-bottom: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;"><span><img src="outputs/article_20250327_104909/media/全景解读_LLM_Posting-Train后训练技术_img_21.jpg" style="display: block;margin-right: auto;margin-left: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 8px;object-fit: fill;box-shadow: rgba(153, 153, 153, 0.3) 2px 4px 8px 0px;height: auto !important;"/></span></figure></section><p style="display: none;"><mp-style-type></mp-style-type></p></div>
    </div>
    
    <div class="media-info">
        <h3>媒体文件信息</h3>
        <p>图片数量: 21</p>
        <p>视频数量: 0</p>
    </div>
</body>
</html>